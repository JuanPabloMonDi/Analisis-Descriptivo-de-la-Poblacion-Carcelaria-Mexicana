"0","#| label: consolidacion"
"0","#| code-fold: true"
"0",""
"0","set.seed(1311) #Fijamos semilla "
"0",""
"0","centros_de_gravedad <- aggregate(pregroup$centers, by = list(grupos_jerarquicos), FUN = mean) #Calculamos los centros de gravedad obtenidos para los 5000 grupos"
"0",""
"0",""
"0","kmeans_consolidacion <- kmeans(pregroup$centers, centers = centros_de_gravedad[, -1]) #Iniciamos kmeans con los centros de gravedad calculados"
"0",""
"0","ordenados <- order(rowSums(kmeans_consolidacion$centers))"
"0",""
"0","# Crear una nueva asignaciÃ³n de grupos reordenada"
"0","consolidacion <- match(kmeans_consolidacion$cluster, ordenados)"
"0",""
"0","Grupos<-consolidacion[pregroup$cluster] #Obtenemos los grupos finales"
"0","#Grupos<-kmeans_consolidacion$cluster[pregroup$cluster] #Obtenemos los grupos finales"
